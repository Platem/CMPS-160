<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <title></title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="css/main.css">
    </head>
    <body>
			<div id="page">
				<div id="navbar">
					<div id="left-nav" class="nav">
					</div>
					<div id="center-nav" class="nav">
						<span class="brand">CMPS 160 - Final Project</span>
					</div>
					<div id="right-nav" class="nav">
					</div>
				</div>
				<div id="content">
					<div id="left-panel" class="panel collapsed">
						<div class="button nav-icon" data-toggle="left-panel"><div></div></div>

						<div class="panel-content">
							<span class="header" data-toggle="list-1">Header 1</span>
							<ul class="list left-list" id="list-1">
								<li class="list-item">1</li>
								<li class="list-item">2</li>
								<li class="list-item">3</li>
								<li class="list-item">4</li>
								<li class="list-item">5</li>
								<li class="list-item">6</li>
							</ul>

							<span class="header" data-toggle="list-2">Header 2</span>
							<ul class="list left-list" id="list-2">
								<li class="list-item">1</li>
								<li class="list-item">2</li>
								<li class="list-item">3</li>
								<li class="list-item">4</li>
								<li class="list-item">5</li>
								<li class="list-item">6</li>
							</ul>
						</div>
					</div>

					<div id="canvas">
						<canvas id="webgl">Please use a browser that supports "canvas".</canvas>
					</div>

					<div id="right-panel" class="panel collapsed">
						<div class="button nav-icon" data-toggle="right-panel"><div></div></div>

						<div class="panel-content">
							<span class="header" data-toggle="list-3">Header 3</span>
							<ul class="list right-list" id="list-3">
								<li class="list-item"></li>
							</ul>
						</div>
					</div>
				</div>
			</div>

			<script id="vertex-shader" type="x-shader/x-vertex">
				uniform mat4 u_MvpMatrix;

				attribute vec4 a_Position;
				attribute vec4 a_Color;
				attribute vec4 a_Normal;
				attribute vec2 a_TexCoord;

				varying vec4 v_Position;
				varying vec4 v_Color;
				varying vec4 v_Normal;
				varying vec2 v_TexCoord;

				void main() {
					v_Position = a_Position;
					v_Color = a_Color;
					v_Normal = a_Normal;
					v_TexCoord = a_TexCoord;
					gl_PointSize = 5.0;
					gl_Position = u_MvpMatrix * a_Position;
				}
			</script>

			<script id="fragment-shader" type="x-shader/x-fragment">
				precision mediump float;

				varying vec4 v_Position;
				varying vec4 v_Color;
				varying vec4 v_Normal;
				varying vec2 v_TexCoord;

				const vec3 KA = vec3(0.0, 0.0, 0.2);
				const vec3 KD = vec3(1.0, 0.0, 0.0);
				const vec3 KS = vec3(0.4, 0.4, 0.4);
				const float NS = 10.0;

				const vec3 light = vec3(1.0, 1.0, 1.0);
				const vec3 lightColor = vec3(1.0, 1.0, 1.0);

				const vec3 eyeDirection = normalize(vec3(0.0, 0.0, 1.0));
				vec3 reflectionDirection;
				float specular;
				uniform float doLight;
				uniform float texture; /* 0 = no texture | 1 = env | 2 = obj_metal_blue | 3 = obj_metal_red | 4 = obj_metal_green | 5 = obj_wood*/
				uniform sampler2D u_envTexture;
				uniform sampler2D u_objTexture_metal_blue;
				uniform sampler2D u_objTexture_metal_red;
				uniform sampler2D u_objTexture_metal_green;
				uniform sampler2D u_objTexture_wood;
				uniform sampler2D u_objTexture_wood_2;

				void main() {
					gl_FragColor = v_Color;
					gl_FragColor.a = 1.0;
							
					if (texture > 0.0) {
						if (texture == 1.0) {
							gl_FragColor = texture2D(u_envTexture, v_TexCoord);
						} else if (texture == 2.0) {
							gl_FragColor = texture2D(u_objTexture_metal_blue, v_TexCoord);
						} else if (texture == 3.0) {
							gl_FragColor = texture2D(u_objTexture_metal_red, v_TexCoord);
						} else if (texture == 4.0) {
							gl_FragColor = texture2D(u_objTexture_metal_green, v_TexCoord);
						} else if (texture == 5.0) {
							gl_FragColor = texture2D(u_objTexture_wood, v_TexCoord);
						} else if (texture == 6.0) {
							gl_FragColor = texture2D(u_objTexture_wood_2, v_TexCoord);
						}
					}

					if (doLight == 1.0) {
						if (texture == 0.0) {	
							gl_FragColor.rgb += min(dot(normalize(v_Normal.xyz), normalize(light)), 0.0) * KD * lightColor;
						}

						reflectionDirection = normalize(reflect(normalize(-light), normalize(v_Normal.xyz)));
						specular = pow(min(dot(reflectionDirection, eyeDirection), 0.0), NS);
						gl_FragColor.rgb += KS * specular * lightColor;

						gl_FragColor.rgb += KA;
					}
				}
			</script>

			<script src="../lib/webgl-utils.js"></script>
			<script src="../lib/webgl-debug.js"></script>
			<script src="../lib/cuon-utils.js"></script>
			<script src="../lib/cuon-matrix.js"></script>
			<script src="js/lib/jquery-3.2.1.min.js"></script>
			<script src="js/lib/mod_ioSOR.js"></script>
			<script src="js/setup.js"></script>
			<script src="js/utils.js"></script>
			<script src="js/obj/env.js"></script>
			<script src="js/obj/table.js"></script>
			<script src="js/obj/cross.js"></script>
			<script src="js/obj/circle.js"></script>
			<script src="js/game/tictactoe.js"></script>
			<script src="js/sketch.js"></script>
			<script src="js/main.js"></script>
    </body>
</html>